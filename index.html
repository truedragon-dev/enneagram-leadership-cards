<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5VFNX8QJB3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-5VFNX8QJB3');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enneagram Leadership Cards v26</title>
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#764ba2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Leadership Cards">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: auto;
            -webkit-overflow-scrolling: touch;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: none;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        /* Navigation Styles - Fixed for iOS */
        .navigation {
            position: sticky;
            top: 0;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px 0;
            margin: -40px -40px 30px -40px;
            border-radius: 20px 20px 0 0;
            z-index: 100;
            border-bottom: 1px solid rgba(102, 126, 234, 0.2);
        }

        .nav-buttons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 8px;
            padding: 0 20px;
        }

        .nav-button {
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        /* Type-specific navigation button colors */
        .nav-button[data-type="1"] { background: #e76f51; }
        .nav-button[data-type="2"] { background: #4a9b4a; }
        .nav-button[data-type="3"] { background: #2d6a4f; }
        .nav-button[data-type="4"] { background: #4a9b8e; }
        .nav-button[data-type="5"] { background: #1e6091; }
        .nav-button[data-type="6"] { background: #6a4c93; }
        .nav-button[data-type="7"] { background: #457b9d; }
        .nav-button[data-type="8"] { background: #a63446; }
        .nav-button[data-type="9"] { background: #b8956a; }

        .nav-button.experiment {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: #764ba2;
            padding: 8px 12px;
        }

        .nav-button.experiment:hover {
            background: linear-gradient(135deg, #9f7aea 0%, #553c9a 100%);
            color: white;
            border-color: transparent;
        }

        h1 {
            text-align: center;
            font-size: 2.5em;
            color: #4a5568;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .subtitle {
            text-align: center;
            font-size: 1.2em;
            color: #718096;
            margin-bottom: 20px;
            font-style: italic;
        }

        .instructions {
            text-align: center;
            font-size: 1em;
            color: #4a5568;
            margin-bottom: 30px;
            padding: 15px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 10px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .card-container {
            perspective: 1000px;
            height: 950px;
            scroll-margin-top: 120px;
        }

        /* iOS-optimized focus animation */
        .card-container.focused {
            animation: cardFocus 0.8s ease-out;
        }

        @keyframes cardFocus {
            0% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(102, 126, 234, 0);
            }
            40% {
                transform: scale(1.01);
                box-shadow: 0 0 0 10px rgba(102, 126, 234, 0.15);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(102, 126, 234, 0);
            }
        }

        .card {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.8s ease;
            cursor: pointer;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            background: white;
            border-left: 6px solid;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .card-back {
            transform: rotateY(180deg);
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
        }

        .type-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .type-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-right: 15px;
            opacity: 0.8;
        }

        .type-name {
            font-size: 1.4em;
            font-weight: 600;
            color: #2d3748;
        }

        .section {
            margin-bottom: 15px;
        }

        .section-title {
            font-size: 0.9em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            opacity: 0.7;
        }

        .section-content {
            line-height: 1.5;
            font-size: 0.9em;
        }

        .field-question {
            background: rgba(102, 126, 234, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid;
            font-size: 1em;
            line-height: 1.6;
        }

        .field-question:last-of-type {
            margin-bottom: 0;
        }

        .field-title {
            font-size: 1.8em;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
            text-align: center;
        }

        .attribution {
            font-size: 0.75em;
            color: #9ca3af;
            font-style: italic;
            text-align: center;
            padding-top: 10px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            margin-top: auto;
        }

        .flip-indicator {
            background: rgba(102, 126, 234, 0.1);
            padding: 12px 15px;
            border-radius: 10px;
            font-size: 0.9em;
            color: #4a5568;
            text-align: center;
            font-weight: 500;
            border: 2px dashed rgba(102, 126, 234, 0.3);
            margin-top: 20px;
        }

        .core-drive { color: #e53e3e; }
        .leads-through { color: #38a169; }
        .interaction-style { color: #3182ce; }
        .shadow-watch { color: #d69e2e; }
        .growth-edge { color: #805ad5; }

        .experiment-card {
            border-left-color: #9f7aea !important;
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%) !important;
        }

        .experiment-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            justify-content: center;
        }

        .experiment-icon {
            font-size: 2.5em;
            margin-right: 15px;
        }

        .experiment-title {
            font-size: 1.6em;
            font-weight: 600;
            color: #553c9a;
        }

        .experiment-content {
            margin-bottom: 20px;
        }

        .current-experiment {
            background: rgba(159, 122, 234, 0.1);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            border-left: 4px solid #9f7aea;
        }

        .experiment-label {
            font-size: 0.9em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #553c9a;
            margin-bottom: 10px;
        }

        .experiment-practice {
            font-size: 1.1em;
            line-height: 1.6;
            color: #2d3748;
            font-weight: 500;
            margin-bottom: 25px;
        }

        .experiment-instructions {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .instruction-step {
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .step-number {
            background: #9f7aea;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1em;
            font-weight: 600;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .step-text {
            font-size: 1em;
            line-height: 1.5;
            color: #4a5568;
        }

        .experiment-examples {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .example-card {
            background: rgba(159, 122, 234, 0.1);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #9f7aea;
        }

        .example-type {
            font-size: 0.9em;
            font-weight: 600;
            color: #553c9a;
            margin-bottom: 8px;
        }

        .example-text {
            font-size: 0.9em;
            line-height: 1.5;
            color: #2d3748;
        }

        /* Type-specific colors */
        .type-1 { border-left-color: #e76f51; }
        .type-2 { border-left-color: #4a9b4a; }
        .type-3 { border-left-color: #2d6a4f; }
        .type-4 { border-left-color: #4a9b8e; }
        .type-5 { border-left-color: #1e6091; }
        .type-6 { border-left-color: #6a4c93; }
        .type-7 { border-left-color: #457b9d; }
        .type-8 { border-left-color: #a63446; }
        .type-9 { border-left-color: #b8956a; }

        .type-1 .type-number { color: #e76f51; }
        .type-2 .type-number { color: #4a9b4a; }
        .type-3 .type-number { color: #2d6a4f; }
        .type-4 .type-number { color: #4a9b8e; }
        .type-5 .type-number { color: #1e6091; }
        .type-6 .type-number { color: #6a4c93; }
        .type-7 .type-number { color: #457b9d; }
        .type-8 .type-number { color: #a63446; }
        .type-9 .type-number { color: #b8956a; }

        .type-1 .field-question { border-left-color: #e76f51; }
        .type-2 .field-question { border-left-color: #4a9b4a; }
        .type-3 .field-question { border-left-color: #2d6a4f; }
        .type-4 .field-question { border-left-color: #4a9b8e; }
        .type-5 .field-question { border-left-color: #1e6091; }
        .type-6 .field-question { border-left-color: #6a4c93; }
        .type-7 .field-question { border-left-color: #457b9d; }
        .type-8 .field-question { border-left-color: #a63446; }
        .type-9 .field-question { border-left-color: #b8956a; }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .navigation {
                margin: -20px -20px 20px -20px;
            }
            
            .nav-buttons {
                gap: 6px;
                padding: 0 10px;
            }
            
            .nav-button {
                padding: 8px 12px;
                font-size: 13px;
            }
            
            .nav-button.experiment {
                padding: 8px 10px;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .card-container {
                height: 850px;
                scroll-margin-top: 80px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Navigation Header -->
        <div class="navigation">
          <div class="nav-buttons">
            <button class="nav-button" data-type="1" onclick="scrollToCard(1)">1</button>
            <button class="nav-button" data-type="2" onclick="scrollToCard(2)">2</button>
            <button class="nav-button" data-type="3" onclick="scrollToCard(3)">3</button>
            <button class="nav-button" data-type="4" onclick="scrollToCard(4)">4</button>
            <button class="nav-button" data-type="5" onclick="scrollToCard(5)">5</button>
            <button class="nav-button" data-type="6" onclick="scrollToCard(6)">6</button>
            <button class="nav-button" data-type="7" onclick="scrollToCard(7)">7</button>
            <button class="nav-button" data-type="8" onclick="scrollToCard(8)">8</button>
            <button class="nav-button" data-type="9" onclick="scrollToCard(9)">9</button>
            <button class="nav-button experiment" onclick="scrollToCard('experiment')">⚡</button>
          </div>
        </div>

        <h1>Enneagram Leadership Cards</h1>
        <p class="subtitle">Individual Awareness & Higher Team IQ</p>
        <div class="instructions">
            <strong>Click any card to flip between individual patterns and team intelligence questions.</strong>
        </div>

        <div class="grid" id="cardGrid">
            <!-- Cards will be populated by JavaScript -->
        </div>
    </div>

    <script>
        // Enneagram Data
        const enneagramData = [
            {
                type: "Type 1—The Strict Perfectionist",
                number: "1",
                coreDrive: "Driven to do what's right and improve the world while avoiding mistakes, blame, or being seen as corrupt or defective.",
                leadsThrough: "Integrity, responsibility, attention to detail, organization, and pragmatism",
                interactionStyle: "Principled, firm, composed. Leads with structure and standards. Can become rigid under chaos or inefficiency.",
                shadowWatch: "When I'm in shadow, I can create a field where others feel like they're walking on eggshells, anticipating criticism and judgment. This happens even when I think I'm being helpful by pointing out what needs to be fixed.",
                growthEdge: "Act on what's good enough before you know it's right, and stay with it long enough to discover that effectiveness can emerge from iteration, not just perfection.",
                fieldQuestions: [
                    "Where is perfectionism blocking our progress? (Watch Your Shadow)",
                    "Are we focusing on being right or being effective? (Watch Your Shadow)",
                    "What's working well that we should protect and build on? (Offer Your Gifts)",
                    "What standards are serving us vs. limiting us right now? (Offer Your Gifts)"
                ]
            },
            {
                type: "Type 2—The Considerate Helper",
                number: "2",
                coreDrive: "Seeks love and connection by meeting others' needs while avoiding rejection, being seen as inadequate, or feeling unneeded.",
                leadsThrough: "Motivation, relational inelligence, supportiveness, and resourcefulness",
                interactionStyle: "Warm, attentive, relationally attuned. Prioritizes others' needs and rapport. May over-accommodate or avoid direct asks.",
                shadowWatch: "When I'm in shadow, I can make others feel guilty for having needs I can't meet or for not appreciating my efforts enough. This happens even when I think I'm being selflessly supportive.",
                growthEdge: "Ask directly for what you need before ensuring others are taken care of, and stay with it long enough to discover that others can stay connected even when you prioritize yourself.",
                fieldQuestions: [
                    "Who's feeling guilty or obligated rather than genuinely committed? (Watch Your Shadow)",
                    "Where are we hinting at needs instead of asking directly? (Watch Your Shadow)",
                    "Who's not being heard or cared for right now? (Offer Your Gifts)",
                    "Are we attending to relationships while pursuing our goals? (Offer Your Gifts)"
                ]
            },
            {
                type: "Type 3—The Competitive Achiever",
                number: "3",
                coreDrive: "Pursues achievement and recognition to feel valued while avoiding failure, inefficiency, or being seen as unsuccessful or unworthy.",
                leadsThrough: "Focus, clear goals, entrepreneurial spirit, and can-do energy",
                interactionStyle: "Polished, focused, efficient. Orients to goals and recognition. Can bypass emotional nuance in pursuit of performance.",
                shadowWatch: "When I'm in shadow, I can create a pace that others can't sustain and make process feel less important than results. This happens even when I think I'm being appropriately focused and efficient.",
                growthEdge: "Show up authentically messy before you feel polished enough, and stay with it long enough to discover that people can value your realness more than your performance.",
                fieldQuestions: [
                    "Are we optimizing for real impact or just looking successful? (Watch Your Shadow)",
                    "Are we including all voices in our drive toward goals? (Watch Your Shadow)",
                    "How can we channel our momentum more effectively? (Offer Your Gifts)",
                    "What's the right pace to sustain our progress? (Offer Your Gifts)"
                ]
            },
            {
                type: "Type 4—The Intense Creative",
                number: "4",
                coreDrive: "Strives for authenticity and emotional depth while avoiding being misunderstood, mundane, or emotionally insignificant.",
                leadsThrough: "Vision, creativity, compassion, and emotional depth",
                interactionStyle: "Expressive, introspective, emotionally honest. Seeks depth and resonance. May withdraw if authenticity feels threatened.",
                shadowWatch: "When I'm in shadow, I can create a field where others feel they can't be authentic enough or that their concerns are too ordinary. This happens even when I think I'm championing depth and meaning.",
                growthEdge: "Share what's ordinary and commonplace about your experience, and stay with it long enough to discover that connection can happen through shared humanity, not just specialness.",
                fieldQuestions: [
                    "Are we dismissing practical solutions because they feel too ordinary? (Watch Your Shadow)",
                    "Who might be feeling like their contribution isn't 'special' enough? (Watch Your Shadow)",
                    "What's missing from our conversation that needs to be named? (Offer Your Gifts)",
                    "Are we being authentic or just going through the motions? (Offer Your Gifts)"
                ]
            },
            {
                type: "Type 5—The Quiet Specialist",
                number: "5",
                coreDrive: "Seeks knowledge and clarity to maintain autonomy while avoiding intrusion, overwhelm, or appearing incompetent.",
                leadsThrough: "Expertise, analysis, objectivity, planning, and logic",
                interactionStyle: "Private, precise, observing. Engages from a distance. Shares selectively and prefers mental clarity over emotional messiness.",
                shadowWatch: "When I'm in shadow, I can withhold information and process, leaving others to fill in gaps with assumptions. This happens even when I think I'm being thorough and protecting the quality of my thinking.",
                growthEdge: "Share your thinking process before it's complete, and stay with it long enough to discover that others' input can enhance rather than contaminate your insights.",
                fieldQuestions: [
                    "Where is the desire for more information slowing us down? (Watch Your Shadow)",
                    "Who's withdrawing instead of engaging with the team? (Watch Your Shadow)",
                    "What are we not seeing because we're moving too fast? (Offer Your Gifts)",
                    "Where do we need more time to think before acting? (Offer Your Gifts)"
                ]
            },
            {
                type: "Type 6—The Loyal Skeptic",
                number: "6",
                coreDrive: "Wants security and trust through loyalty and vigilance while avoiding uncertainty, blame, or being caught off guard.",
                leadsThrough: "Risk assessment, perseverance, collaboration, and foresight",
                interactionStyle: "Vigilant, loyal, questioning. Builds safety through inquiry and preparedness. Can oscillate between caution and pushback.",
                shadowWatch: "When I'm in shadow, I can create an atmosphere where others feel questioned, doubted, or that nothing is ever safe enough. This happens even when I think I'm being appropriately cautious and thorough.",
                growthEdge: "Act on your instinct before you have all the guarantees, and stay with it long enough to discover that security can come from trusting your inner knowing, not just external certainty.",
                fieldQuestions: [
                    "Are we stuck in endless questioning without deciding? (Watch Your Shadow)",
                    "Where is anxiety driving our decisions instead of wisdom? (Watch Your Shadow)",
                    "What risks are we not seeing or preparing for? (Offer Your Gifts)",
                    "Do we have enough support and backup plans? (Offer Your Gifts)"
                ]
            },
            {
                type: "Type 7—The Enthusiastic Visionary",
                number: "7",
                coreDrive: "Pursues freedom, joy, and new possibilities while avoiding limitation, pain, or feeling trapped in discomfort.",
                leadsThrough: "Innovation, curiosity, energy, idea generation, and optimism",
                interactionStyle: "Upbeat, scattered, future-focused. Brings energy and ideas. May avoid hard emotions or prematurely pivot from discomfort.",
                shadowWatch: "When I'm in shadow, I can create a field where difficult emotions or problems get dismissed or glossed over too quickly. This happens even when I think I'm maintaining positive energy and forward momentum.",
                growthEdge: "Stay with difficulty and constraint long enough to let it teach you, and discover that depth can emerge from limitation, not just from endless options.",
                fieldQuestions: [
                    "Are we creating chaos by pursuing too many ideas at once? (Watch Your Shadow)",
                    "Who's silently holding pain while we move forward with optimism? (Watch Your Shadow)",
                    "What possibilities are we not seeing or exploring? (Offer Your Gifts)",
                    "How can we bring more innovation to this challenge? (Offer Your Gifts)"
                ]
            },
            {
                type: "Type 8—The Active Controller",
                number: "8",
                coreDrive: "Driven to assert control and protect what matters while avoiding vulnerability, weakness, or being controlled by others.",
                leadsThrough: "Boldness, action, strategic influence, and candor",
                interactionStyle: "Bold, direct, intense. Commands attention and moves quickly to action. Can overpower or challenge before building buy-in.",
                shadowWatch: "When I'm in shadow, I can create a field where others feel steamrolled, unheard, or afraid to voice alternative perspectives. This happens even when I think I'm being appropriately direct and action-oriented.",
                growthEdge: "Show your uncertainty and ask for help before you feel strong enough, and stay with it long enough to discover that vulnerability can increase rather than diminish your influence.",
                fieldQuestions: [
                    "Are we steamrolling instead of building buy-in? (Watch Your Shadow)",
                    "What vulnerability, if modeled here, would unlock more truth from others? (Watch Your Shadow)",
                    "What are we avoiding that needs direct engagement? (Offer Your Gifts)",
                    "Who might be holding back their truth or perspective? (Offer Your Gifts)"
                ]
            },
            {
                type: "Type 9—The Adaptive Peacemaker",
                number: "9",
                coreDrive: "Seeks peace, harmony, and internal stability while avoiding conflict, tension, or the discomfort of their own priorities.",
                leadsThrough: "Patience, consistency, diplomacy, and inclusion",
                interactionStyle: "Open, agreeable, unhurried. Tends to merge with group flow. May resist direct conflict or suppress inner priorities.",
                shadowWatch: "When I'm in shadow, I can create a vacuum where others have to carry all the tension and make the difficult decisions. This happens even when I think I'm being diplomatic and keeping the peace.",
                growthEdge: "Speak into the conflict that others are avoiding and stay with it long enough to discover that engaging tension can create deeper harmony than always avoiding it.",
                fieldQuestions: [
                    "Where are we avoiding conflict instead of engaging it? (Watch Your Shadow)",
                    "What silence in the room might actually be resistance or dissent? (Watch Your Shadow)",
                    "What tensions are we not addressing that need attention? (Offer Your Gifts)",
                    "Where does staying steady and consistent break us through? (Offer Your Gifts)"
                ]
            }
        ];

        // Navigation Functions (Global scope for onclick handlers)
        function scrollToCard(cardNumber) {
            try {
                const cardElement = document.querySelector(`[data-card="${cardNumber}"]`);
                if (!cardElement) {
                    console.error('Card element not found for:', cardNumber);
                    return;
                }
                
                // Remove focus from all cards
                document.querySelectorAll('.card-container').forEach(card => {
                    card.classList.remove('focused');
                });
                
                // Use native scrollIntoView for iOS compatibility
                cardElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
                
                // Add focus animation after scroll completes
                setTimeout(() => {
                    cardElement.classList.add('focused');
                }, 600);
            } catch (error) {
                console.error('Error scrolling to card:', error);
            }
        }

        // Card click handler
        function handleCardClick(event) {
            const card = event.target.closest('.card');
            if (card) {
                card.classList.toggle('flipped');
            }
        }

        // Create card HTML
        function createCard(data) {
            return `
                <div class="card-container" data-card="${data.number}">
                    <div class="card type-${data.number}" data-type="${data.number}">
                        <div class="card-face type-${data.number}">
                            <div class="type-header">
                                <div class="type-number">${data.number}</div>
                                <div class="type-name">${data.type.replace(/Type \d+—/, '')}</div>
                            </div>
                            
                            <div class="section">
                                <div class="section-title core-drive">Core Drive</div>
                                <div class="section-content">${data.coreDrive}</div>
                            </div>
                            
                            <div class="section">
                                <div class="section-title leads-through">Leadership Gifts</div>
                                <div class="section-content">${data.leadsThrough}</div>
                            </div>
                            
                            <div class="section">
                                <div class="section-title interaction-style">Interaction Style</div>
                                <div class="section-content">${data.interactionStyle}</div>
                            </div>
                            
                            <div class="section">
                                <div class="section-title shadow-watch">Shadow Watch</div>
                                <div class="section-content">${data.shadowWatch}</div>
                            </div>
                            
                            <div class="section">
                                <div class="section-title growth-edge">Growth Edge</div>
                                <div class="section-content">${data.growthEdge}</div>
                            </div>
                            
                            <div class="flip-indicator">Click to flip →</div>
                            
                            <div class="attribution">
                                created by allan @ truedragon.io
                            </div>
                        </div>
                        
                        <div class="card-face card-back type-${data.number}">
                            <div class="type-header">
                                <div class="type-number">${data.number}</div>
                                <div class="type-name">${data.type.replace(/Type \d+—/, '')}</div>
                            </div>
                            
                            <div class="field-title">Questions for Higher Team IQ</div>
                            
                            ${data.fieldQuestions.map(question => 
                                `<div class="field-question">${question}</div>`
                            ).join('')}
                            
                            <div class="flip-indicator">← Click to flip back</div>
                            
                            <div class="attribution">
                                created by allan @ truedragon.io
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Create experiment card HTML
        function createExperimentCard() {
            return `
                <div class="card-container" data-card="experiment">
                    <div class="card experiment-card" data-type="experiment">
                        <!-- FRONT -->
                        <div class="card-face experiment-card">
                            <div class="experiment-header">
                                <div class="experiment-icon">⚡</div>
                                <div class="experiment-title">Team Growth Experiment</div>
                            </div>

                            <div class="experiment-content">
                                <div class="experiment-practice">
                                    Pick one person's growth challenge and make it a team experiment for the week. When everyone practices the same edge together, it creates shared learning and support.
                                </div>

                                <div class="experiment-instructions">
                                    <div class="instruction-step">
                                        <div class="step-number">1</div>
                                        <div class="step-text">Someone shares a specific challenge they're working on</div>
                                    </div>
                                    <div class="instruction-step">
                                        <div class="step-number">2</div>
                                        <div class="step-text">Turn it into a simple behavior everyone can practice</div>
                                    </div>
                                    <div class="instruction-step">
                                        <div class="step-number">3</div>
                                        <div class="step-text">Notice what changes in meetings and interactions</div>
                                    </div>
                                    <div class="instruction-step">
                                        <div class="step-number">4</div>
                                        <div class="step-text">Share observations at the end of the week</div>
                                    </div>
                                </div>
                            </div>

                            <div class="flip-indicator">Click to see examples →</div>
                            <div class="attribution">designed by allan @ truedragon.io</div>
                        </div>

                        <!-- BACK -->
                        <div class="card-face card-back experiment-card">
                            <div class="experiment-header">
                                <div class="experiment-icon">💡</div>
                                <div class="experiment-title">Try One of These</div>
                            </div>

                            <div class="experiment-examples">
                                <div class="example-card">
                                    <div class="example-type">Type 1:</div>
                                    <div class="example-text">"I need to act before everything is perfect" → Ship something at 80% complete</div>
                                </div>
                                <div class="example-card">
                                    <div class="example-type">Type 2:</div>
                                    <div class="example-text">"I need to ask directly for help" → Make one direct request daily</div>
                                </div>
                                <div class="example-card">
                                    <div class="example-type">Type 3:</div>
                                    <div class="example-text">"I need to show my messy process" → Share work-in-progress once this week</div>
                                </div>
                                <div class="example-card">
                                    <div class="example-type">Type 7:</div>
                                    <div class="example-text">"I need to limit my options" → Choose three priorities max and say no to everything else</div>
                                </div>
                                <div class="example-card">
                                    <div class="example-type">Type 8:</div>
                                    <div class="example-text">"I need to ask for help" → Say "I don't know" and ask for input</div>
                                </div>
                            </div>

                            <div class="flip-indicator">← Flip back</div>
                            <div class="attribution">designed by allan @ truedragon.io</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Scroll handler for flipping back cards
        function handleScroll() {
            const flippedCards = document.querySelectorAll('.card.flipped');
            
            flippedCards.forEach(card => {
                if (isElementCompletelyOutOfView(card)) {
                    card.classList.remove('flipped');
                }
            });
        }

        // Check if element is completely out of viewport
        function isElementCompletelyOutOfView(el) {
            const rect = el.getBoundingClientRect();
            const buffer = 100; // 100px buffer to prevent premature flipping
            return (
                rect.top > window.innerHeight + buffer || 
                rect.bottom < -buffer
            );
        }

        // Throttled scroll handler
        let scrollTimeout;
        function throttledScrollHandler() {
            if (!scrollTimeout) {
                scrollTimeout = setTimeout(() => {
                    handleScroll();
                    scrollTimeout = null;
                }, 100);
            }
        }

        // Initialize the app
        function initializeApp() {
            try {
                const grid = document.getElementById('cardGrid');
                if (!grid) {
                    throw new Error('Card grid element not found');
                }
                
                // Generate all cards
                const typeCards = enneagramData.map(data => createCard(data)).join('');
                const experimentCard = createExperimentCard();
                
                // Insert cards into grid
                grid.innerHTML = typeCards + experimentCard;
                
                // Add click event listener for card flipping
                grid.addEventListener('click', handleCardClick);
                
                // Add scroll event listener for auto flip-back
                window.addEventListener('scroll', throttledScrollHandler, { passive: true });
                
                console.log('Enneagram app initialized successfully');
            } catch (error) {
                console.error('Failed to initialize app:', error);
                showErrorMessage();
            }
        }

        function showErrorMessage() {
            const grid = document.getElementById('cardGrid');
            if (grid) {
                grid.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #721c24; background: #f8d7da; border-radius: 10px;">
                        <h3>Something went wrong</h3>
                        <p>Please refresh the page to try again.</p>
                    </div>
                `;
            }
        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }
    </script>
</body>
</html>
